
  
root@n4:~# ip netns add ns1
root@n4:~# ip link add veth0 type veth peer veth1
Error: either "dev" is duplicate, or "veth1" is a garbage.
root@n4:~# ip link add veth0 type veth peer name veth1
root@n4:~# ip netns exec ns1 ifconfig 10.1.1.1/24 up
10.1.1.1/24: ERROR while getting interface flags: No such device
root@n4:~# ip netns list
ns1
root@n4:~# ip netns exec ns1 ifconfig veth1 10.1.1.1/24 up
SIOCSIFADDR: No such device
veth1: ERROR while getting interface flags: No such device
veth1: ERROR while getting interface flags: No such device
SIOCSIFNETMASK: No such device
root@n4:~# ip netns exec ns1 ifconfig
root@n4:~# ip link set veth1 netns ns1
root@n4:~# ip netns exec ns1 ifconfig veth1 10.1.1.1/24 up
root@n4:~# ip netns exec ns1 ifconfig
veth1     Link encap:Ethernet  HWaddr ee:98:b1:cc:1a:9b
          inet addr:10.1.1.1  Bcast:10.1.1.255  Mask:255.255.255.0
          UP BROADCAST MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

root@n4:~# ifconfig veth0 10.1.1.3/24 up
root@n4:~# ping 10.1.1.1
PING 10.1.1.1 (10.1.1.1) 56(84) bytes of data.
64 bytes from 10.1.1.1: icmp_seq=1 ttl=64 time=0.063 ms
64 bytes from 10.1.1.1: icmp_seq=2 ttl=64 time=0.032 ms
^C
--- 10.1.1.1 ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 999ms
rtt min/avg/max/mdev = 0.032/0.047/0.063/0.016 ms
root@n4:~# ip netns add ns2
root@n4:~# ip link add veth0 type veth peer name veth2
RTNETLINK answers: File exists
root@n4:~# ip link set veth2 netns ns2
Cannot find device "veth2"
root@n4:~# ip link add veth2 type veth peer name veth3
root@n4:~# ip link set veth3 netns ns2                                                                           
root@n4:~# ip netns exec ns2 ifconfig veth3 10.1.1.3/24 up
root@n4:~# ifconfig veth0 10.1.1.2/24
root@n4:~# ifconfig veth2 10.1.1.4/24 up
root@n4:~# ip netns list
ns2
ns1
root@n4:~# ifconfig
eth0      Link encap:Ethernet  HWaddr 90:b1:1c:5a:4b:e0
          inet addr:10.0.31.19  Bcast:10.0.31.255  Mask:255.255.255.0
          inet6 addr: fe80::92b1:1cff:fe5a:4be0/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:164491 errors:0 dropped:0 overruns:0 frame:0
          TX packets:205233 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:77389829 (77.3 MB)  TX bytes:215144476 (215.1 MB)
          Interrupt:35

eth2      Link encap:Ethernet  HWaddr 90:b1:1c:5a:4b:e2
          inet addr:10.1.24.4  Bcast:10.1.24.255  Mask:255.255.255.0
          inet6 addr: fe80::92b1:1cff:fe5a:4be2/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:2326 errors:0 dropped:0 overruns:0 frame:0
          TX packets:5908 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:173952 (173.9 KB)  TX bytes:438444 (438.4 KB)
          Interrupt:34

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:189 errors:0 dropped:0 overruns:0 frame:0
          TX packets:189 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:31471 (31.4 KB)  TX bytes:31471 (31.4 KB)

veth0     Link encap:Ethernet  HWaddr 52:5e:be:01:2b:52
          inet addr:10.1.1.2  Bcast:10.1.1.255  Mask:255.255.255.0
          inet6 addr: fe80::505e:beff:fe01:2b52/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:15 errors:0 dropped:0 overruns:0 frame:0
          TX packets:45 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:1166 (1.1 KB)  TX bytes:2426 (2.4 KB)

veth2     Link encap:Ethernet  HWaddr fe:0b:d9:6c:31:c0
          inet addr:10.1.1.4  Bcast:10.1.1.255  Mask:255.255.255.0
          inet6 addr: fe80::fc0b:d9ff:fe6c:31c0/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:14 errors:0 dropped:0 overruns:0 frame:0
          TX packets:8 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:900 (900.0 B)  TX bytes:648 (648.0 B)

root@n4:~# ping 10.1.1.1
PING 10.1.1.1 (10.1.1.1) 56(84) bytes of data.
64 bytes from 10.1.1.1: icmp_seq=1 ttl=64 time=0.058 ms
64 bytes from 10.1.1.1: icmp_seq=2 ttl=64 time=0.032 ms
^C
--- 10.1.1.1 ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 999ms
rtt min/avg/max/mdev = 0.032/0.045/0.058/0.013 ms
root@n4:~# ping 10.1.1.3
PING 10.1.1.3 (10.1.1.3) 56(84) bytes of data.
^C
--- 10.1.1.3 ping statistics ---
2 packets transmitted, 0 received, 100% packet loss, time 1000ms

root@n4:~# route -n
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
0.0.0.0         10.0.31.201     0.0.0.0         UG    0      0        0 eth0
10.0.0.0        10.1.24.2       255.0.0.0       UG    0      0        0 eth2
10.0.31.0       0.0.0.0         255.255.255.0   U     0      0        0 eth0
10.1.1.0        0.0.0.0         255.255.255.0   U     0      0        0 veth0
10.1.1.0        0.0.0.0         255.255.255.0   U     0      0        0 veth2
10.1.24.0       0.0.0.0         255.255.255.0   U     0      0        0 eth2
root@n4:~# arp -n
Address                  HWtype  HWaddress           Flags Mask            Iface
10.0.31.39               ether   90:b1:1c:5a:4a:54   C                     eth0
10.1.24.2                ether   90:b1:1c:5a:3a:df   C                     eth2
10.0.31.202              ether   00:0a:f7:00:70:60   C                     eth0
10.1.1.1                 ether   ee:98:b1:cc:1a:9b   C                     veth0
10.1.1.3                         (incomplete)                              veth0
10.1.1.6                         (incomplete)                              veth0
10.0.31.201              ether   00:0a:f7:00:6f:a8   C                     eth0
root@n4:~# ifconfig veth3
veth3: error fetching interface information: Device not found
root@n4:~# ip netns exec ns2 ifconfig veth3
veth3     Link encap:Ethernet  HWaddr 0e:a8:7c:51:ae:f9
          inet addr:10.1.1.3  Bcast:10.1.1.255  Mask:255.255.255.0
          inet6 addr: fe80::ca8:7cff:fe51:aef9/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:8 errors:0 dropped:0 overruns:0 frame:0
          TX packets:14 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:648 (648.0 B)  TX bytes:900 (900.0 B)

root@n4:~# arp -s 10.1.1.3 0e:a8:7c:51:ae:f9 -i veth2
root@n4:~# ping 10.1.1.3
PING 10.1.1.3 (10.1.1.3) 56(84) bytes of data.
^C
--- 10.1.1.3 ping statistics ---
2 packets transmitted, 0 received, 100% packet loss, time 1007ms

root@n4:~# arp -n
Address                  HWtype  HWaddress           Flags Mask            Iface
10.1.1.3                 ether   0e:a8:7c:51:ae:f9   CM                    veth2
10.0.31.39               ether   90:b1:1c:5a:4a:54   C                     eth0
10.1.24.2                ether   90:b1:1c:5a:3a:df   C                     eth2
10.1.1.3                         (incomplete)                              veth0
10.1.1.1                 ether   ee:98:b1:cc:1a:9b   C                     veth0
10.0.31.202              ether   00:0a:f7:00:70:60   C                     eth0
10.0.31.201              ether   00:0a:f7:00:6f:a8   C                     eth0
10.1.1.6                         (incomplete)                              veth0
root@n4:~# route -n
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
0.0.0.0         10.0.31.201     0.0.0.0         UG    0      0        0 eth0
10.0.0.0        10.1.24.2       255.0.0.0       UG    0      0        0 eth2
10.0.31.0       0.0.0.0         255.255.255.0   U     0      0        0 eth0
10.1.1.0        0.0.0.0         255.255.255.0   U     0      0        0 veth0
10.1.1.0        0.0.0.0         255.255.255.0   U     0      0        0 veth2
10.1.24.0       0.0.0.0         255.255.255.0   U     0      0        0 eth2
root@n4:~# ip route replace 10.1.1.3 dev veth2
root@n4:~# route -n
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
0.0.0.0         10.0.31.201     0.0.0.0         UG    0      0        0 eth0
10.0.0.0        10.1.24.2       255.0.0.0       UG    0      0        0 eth2
10.0.31.0       0.0.0.0         255.255.255.0   U     0      0        0 eth0
10.1.1.0        0.0.0.0         255.255.255.0   U     0      0        0 veth0
10.1.1.0        0.0.0.0         255.255.255.0   U     0      0        0 veth2
10.1.1.3        0.0.0.0         255.255.255.255 UH    0      0        0 veth2
10.1.24.0       0.0.0.0         255.255.255.0   U     0      0        0 eth2
root@n4:~# ip route del 10.1.1.0/24 dev veth2
root@n4:~# route -n
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
0.0.0.0         10.0.31.201     0.0.0.0         UG    0      0        0 eth0
10.0.0.0        10.1.24.2       255.0.0.0       UG    0      0        0 eth2
10.0.31.0       0.0.0.0         255.255.255.0   U     0      0        0 eth0
10.1.1.0        0.0.0.0         255.255.255.0   U     0      0        0 veth0
10.1.1.3        0.0.0.0         255.255.255.255 UH    0      0        0 veth2
10.1.24.0       0.0.0.0         255.255.255.0   U     0      0        0 eth2
root@n4:~# ping 10.1.1.3
PING 10.1.1.3 (10.1.1.3) 56(84) bytes of data.
64 bytes from 10.1.1.3: icmp_seq=1 ttl=64 time=0.028 ms
64 bytes from 10.1.1.3: icmp_seq=2 ttl=64 time=0.029 ms
64 bytes from 10.1.1.3: icmp_seq=3 ttl=64 time=0.032 ms
^C
--- 10.1.1.3 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 1998ms
rtt min/avg/max/mdev = 0.028/0.029/0.032/0.006 ms
root@n4:~# ovs-vsctl show
ec3a1666-224f-4b92-8a3c-615ac4bf511e
root@n4:~# ovs-vsctl add-br s1
root@n4:~# ovs-vsctl set bridge s1 other-config:hwaddr=00:00:00:aa:bb:cc
root@n4:~# ovs-vsctl add-port s1 veth0
root@n4:~# ovs-vsctl add-port s1 veth2
root@n4:~# ifconfig
eth0      Link encap:Ethernet  HWaddr 90:b1:1c:5a:4b:e0
          inet addr:10.0.31.19  Bcast:10.0.31.255  Mask:255.255.255.0
          inet6 addr: fe80::92b1:1cff:fe5a:4be0/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:166495 errors:0 dropped:0 overruns:0 frame:0
          TX packets:207089 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:77558175 (77.5 MB)  TX bytes:216948763 (216.9 MB)
          Interrupt:35

eth2      Link encap:Ethernet  HWaddr 90:b1:1c:5a:4b:e2
          inet addr:10.1.24.4  Bcast:10.1.24.255  Mask:255.255.255.0
          inet6 addr: fe80::92b1:1cff:fe5a:4be2/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:2326 errors:0 dropped:0 overruns:0 frame:0
          TX packets:5908 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:173952 (173.9 KB)  TX bytes:438444 (438.4 KB)
          Interrupt:34

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:211 errors:0 dropped:0 overruns:0 frame:0
          TX packets:211 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:33503 (33.5 KB)  TX bytes:33503 (33.5 KB)

veth0     Link encap:Ethernet  HWaddr 52:5e:be:01:2b:52
          inet addr:10.1.1.2  Bcast:10.1.1.255  Mask:255.255.255.0
          inet6 addr: fe80::505e:beff:fe01:2b52/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:19 errors:0 dropped:0 overruns:0 frame:0
          TX packets:121 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:1446 (1.4 KB)  TX bytes:5778 (5.7 KB)

veth2     Link encap:Ethernet  HWaddr fe:0b:d9:6c:31:c0
          inet addr:10.1.1.4  Bcast:10.1.1.255  Mask:255.255.255.0
          inet6 addr: fe80::fc0b:d9ff:fe6c:31c0/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:59 errors:0 dropped:0 overruns:0 frame:0
          TX packets:31 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:3154 (3.1 KB)  TX bytes:2374 (2.3 KB)

root@n4:~# ping 10.1.1.1
PING 10.1.1.1 (10.1.1.1) 56(84) bytes of data.
^C
--- 10.1.1.1 ping statistics ---
3 packets transmitted, 0 received, 100% packet loss, time 2016ms

root@n4:~# ovs-vsctl show
ec3a1666-224f-4b92-8a3c-615ac4bf511e
    Bridge "s1"
        Port "veth0"
            Interface "veth0"
        Port "s1"
            Interface "s1"
                type: internal
        Port "veth2"
            Interface "veth2"
root@n4:~# ovs-ofctl dump-port s1
ovs-ofctl: unknown command 'dump-port'; use --help for help
root@n4:~# ovs-ofctl dump-port s1 veth0
ovs-ofctl: unknown command 'dump-port'; use --help for help
root@n4:~# ovs-ofctl dump-ports s1
OFPST_PORT reply (xid=0x2): 3 ports
  port LOCAL: rx pkts=0, bytes=0, drop=0, errs=0, frame=0, over=0, crc=0
           tx pkts=0, bytes=0, drop=0, errs=0, coll=0
  port  1: rx pkts=30, bytes=2188, drop=0, errs=0, frame=0, over=0, crc=0
           tx pkts=141, bytes=6898, drop=0, errs=0, coll=0
  port  2: rx pkts=69, bytes=3686, drop=0, errs=0, frame=0, over=0, crc=0
           tx pkts=44, bytes=3264, drop=0, errs=0, coll=0
root@n4:~# ovs-ofctl dump-ports s1
OFPST_PORT reply (xid=0x2): 3 ports
  port LOCAL: rx pkts=0, bytes=0, drop=0, errs=0, frame=0, over=0, crc=0
           tx pkts=0, bytes=0, drop=0, errs=0, coll=0
  port  1: rx pkts=30, bytes=2188, drop=0, errs=0, frame=0, over=0, crc=0
           tx pkts=141, bytes=6898, drop=0, errs=0, coll=0
  port  2: rx pkts=69, bytes=3686, drop=0, errs=0, frame=0, over=0, crc=0
           tx pkts=44, bytes=3264, drop=0, errs=0, coll=0
root@n4:~# ovs-ofctl dump-ports s1
OFPST_PORT reply (xid=0x2): 3 ports
  port LOCAL: rx pkts=0, bytes=0, drop=0, errs=0, frame=0, over=0, crc=0
           tx pkts=0, bytes=0, drop=0, errs=0, coll=0
  port  1: rx pkts=30, bytes=2188, drop=0, errs=0, frame=0, over=0, crc=0
           tx pkts=141, bytes=6898, drop=0, errs=0, coll=0
  port  2: rx pkts=69, bytes=3686, drop=0, errs=0, frame=0, over=0, crc=0
           tx pkts=44, bytes=3264, drop=0, errs=0, coll=0
root@n4:~# ovs-ofctl dump-ports s1
OFPST_PORT reply (xid=0x2): 3 ports
  port LOCAL: rx pkts=0, bytes=0, drop=0, errs=0, frame=0, over=0, crc=0
           tx pkts=0, bytes=0, drop=0, errs=0, coll=0
  port  1: rx pkts=33, bytes=2482, drop=0, errs=0, frame=0, over=0, crc=0
           tx pkts=144, bytes=7192, drop=0, errs=0, coll=0
  port  2: rx pkts=72, bytes=3980, drop=0, errs=0, frame=0, over=0, crc=0
           tx pkts=47, bytes=3558, drop=0, errs=0, coll=0
root@n4:~# ovs-ofctl dump-ports s1
OFPST_PORT reply (xid=0x2): 3 ports
  port LOCAL: rx pkts=0, bytes=0, drop=0, errs=0, frame=0, over=0, crc=0
           tx pkts=0, bytes=0, drop=0, errs=0, coll=0
  port  1: rx pkts=35, bytes=2678, drop=0, errs=0, frame=0, over=0, crc=0
           tx pkts=146, bytes=7388, drop=0, errs=0, coll=0
  port  2: rx pkts=74, bytes=4176, drop=0, errs=0, frame=0, over=0, crc=0
           tx pkts=49, bytes=3754, drop=0, errs=0, coll=0
root@n4:~# ovs-ofctl dump-ports s1
OFPST_PORT reply (xid=0x2): 3 ports
  port LOCAL: rx pkts=0, bytes=0, drop=0, errs=0, frame=0, over=0, crc=0
           tx pkts=0, bytes=0, drop=0, errs=0, coll=0
  port  1: rx pkts=37, bytes=2818, drop=0, errs=0, frame=0, over=0, crc=0
           tx pkts=148, bytes=7528, drop=0, errs=0, coll=0
  port  2: rx pkts=76, bytes=4316, drop=0, errs=0, frame=0, over=0, crc=0
           tx pkts=51, bytes=3894, drop=0, errs=0, coll=0
root@n4:~# ovs-ofctl dump-ports s1
OFPST_PORT reply (xid=0x2): 3 ports
  port LOCAL: rx pkts=0, bytes=0, drop=0, errs=0, frame=0, over=0, crc=0
           tx pkts=0, bytes=0, drop=0, errs=0, coll=0
  port  1: rx pkts=38, bytes=2916, drop=0, errs=0, frame=0, over=0, crc=0
           tx pkts=149, bytes=7626, drop=0, errs=0, coll=0
  port  2: rx pkts=77, bytes=4414, drop=0, errs=0, frame=0, over=0, crc=0
           tx pkts=52, bytes=3992, drop=0, errs=0, coll=0
root@n4:~# ovs-ofctl dump-flows s1
NXST_FLOW reply (xid=0x4):
 cookie=0x0, duration=518.202s, table=0, n_packets=79, n_bytes=5102, idle_age=1, priority=0 actions=NORMAL
root@n4:~# ovs-ofctl dump-flows s1
NXST_FLOW reply (xid=0x4):
 cookie=0x0, duration=523.195s, table=0, n_packets=93, n_bytes=6250, idle_age=1, priority=0 actions=NORMAL
root@n4:~# ovs-ofctl dump-flows s1
NXST_FLOW reply (xid=0x4):
 cookie=0x0, duration=528.762s, table=0, n_packets=106, n_bytes=7468, idle_age=0, priority=0 actions=NORMAL
root@n4:~# ovs-ofctl dump-ports s1
OFPST_PORT reply (xid=0x2): 3 ports
  port LOCAL: rx pkts=0, bytes=0, drop=0, errs=0, frame=0, over=0, crc=0
           tx pkts=0, bytes=0, drop=0, errs=0, coll=0
  port  1: rx pkts=66, bytes=5660, drop=0, errs=0, frame=0, over=0, crc=0
           tx pkts=194, bytes=11084, drop=0, errs=0, coll=0
  port  2: rx pkts=117, bytes=7662, drop=0, errs=0, frame=0, over=0, crc=0
           tx pkts=85, bytes=7106, drop=0, errs=0, coll=0
root@n4:~# ovs-ofctl dump-ports s1
OFPST_PORT reply (xid=0x2): 3 ports
  port LOCAL: rx pkts=0, bytes=0, drop=0, errs=0, frame=0, over=0, crc=0
           tx pkts=0, bytes=0, drop=0, errs=0, coll=0
  port  1: rx pkts=68, bytes=5856, drop=0, errs=0, frame=0, over=0, crc=0
           tx pkts=197, bytes=11322, drop=0, errs=0, coll=0
  port  2: rx pkts=119, bytes=7858, drop=0, errs=0, frame=0, over=0, crc=0
           tx pkts=87, bytes=7302, drop=0, errs=0, coll=0
root@n4:~# ifconfig
eth0      Link encap:Ethernet  HWaddr 90:b1:1c:5a:4b:e0
          inet addr:10.0.31.19  Bcast:10.0.31.255  Mask:255.255.255.0
          inet6 addr: fe80::92b1:1cff:fe5a:4be0/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:167693 errors:0 dropped:0 overruns:0 frame:0
          TX packets:208158 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:77737757 (77.7 MB)  TX bytes:217792661 (217.7 MB)
          Interrupt:35

eth2      Link encap:Ethernet  HWaddr 90:b1:1c:5a:4b:e2
          inet addr:10.1.24.4  Bcast:10.1.24.255  Mask:255.255.255.0
          inet6 addr: fe80::92b1:1cff:fe5a:4be2/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:2326 errors:0 dropped:0 overruns:0 frame:0
          TX packets:5908 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:173952 (173.9 KB)  TX bytes:438444 (438.4 KB)
          Interrupt:34

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:220 errors:0 dropped:0 overruns:0 frame:0
          TX packets:220 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:34295 (34.2 KB)  TX bytes:34295 (34.2 KB)

veth0     Link encap:Ethernet  HWaddr 52:5e:be:01:2b:52
          inet addr:10.1.1.2  Bcast:10.1.1.255  Mask:255.255.255.0
          inet6 addr: fe80::505e:beff:fe01:2b52/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:114 errors:0 dropped:0 overruns:0 frame:0
          TX packets:270 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:10252 (10.2 KB)  TX bytes:16852 (16.8 KB)

veth2     Link encap:Ethernet  HWaddr fe:0b:d9:6c:31:c0
          inet addr:10.1.1.4  Bcast:10.1.1.255  Mask:255.255.255.0
          inet6 addr: fe80::fc0b:d9ff:fe6c:31c0/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:186 errors:0 dropped:0 overruns:0 frame:0
          TX packets:141 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:13136 (13.1 KB)  TX bytes:12290 (12.2 KB)

root@n4:~# route -n
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
0.0.0.0         10.0.31.201     0.0.0.0         UG    0      0        0 eth0
10.0.0.0        10.1.24.2       255.0.0.0       UG    0      0        0 eth2
10.0.31.0       0.0.0.0         255.255.255.0   U     0      0        0 eth0
10.1.1.0        0.0.0.0         255.255.255.0   U     0      0        0 veth0
10.1.1.3        0.0.0.0         255.255.255.255 UH    0      0        0 veth2
10.1.24.0       0.0.0.0         255.255.255.0   U     0      0        0 eth2
root@n4:~# ping 10.1.1.3
PING 10.1.1.3 (10.1.1.3) 56(84) bytes of data.
^C
--- 10.1.1.3 ping statistics ---
2 packets transmitted, 0 received, 100% packet loss, time 1000ms

root@n4:~# ovs-vsctl show
ec3a1666-224f-4b92-8a3c-615ac4bf511e
    Bridge "s1"
        Port "veth0"
            Interface "veth0"
        Port "s1"
            Interface "s1"
                type: internal
        Port "veth2"
            Interface "veth2"
root@n4:~# apt-get install iperf
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following NEW packages will be installed:
  iperf
0 upgraded, 1 newly installed, 0 to remove and 268 not upgraded.
Need to get 56.3 kB of archives.
After this operation, 174 kB of additional disk space will be used.
Get:1 http://us.archive.ubuntu.com/ubuntu/ trusty/universe iperf amd64 2.0.5-3 [56.3 kB]
Fetched 56.3 kB in 0s (139 kB/s)
Selecting previously unselected package iperf.
(Reading database ... 82304 files and directories currently installed.)
Preparing to unpack .../iperf_2.0.5-3_amd64.deb ...
Unpacking iperf (2.0.5-3) ...
Processing triggers for man-db (2.6.7.1-1) ...
Setting up iperf (2.0.5-3) ...
root@n4:~# ovs-ofctl dump-ports s1                                                                               
OFPST_PORT reply (xid=0x2): 3 ports
  port LOCAL: rx pkts=0, bytes=0, drop=0, errs=0, frame=0, over=0, crc=0
           tx pkts=0, bytes=0, drop=0, errs=0, coll=0
  port  1: rx pkts=612728, bytes=40444158, drop=0, errs=0, frame=0, over=0, crc=0
           tx pkts=698508, bytes=26938656792, drop=0, errs=0, coll=0
  port  2: rx pkts=698406, bytes=26938652320, drop=0, errs=0, frame=0, over=0, crc=0
           tx pkts=612779, bytes=40448020, drop=0, errs=0, coll=0
root@n4:~# ovs-vsctl set port veth0 qos=@newqos -- --id=@newqos create qos type=linux-htb queues=0=@q0 -- --id=@q0 crea
te queue other-config:min-rate=2000000 other-config:max-rate=2000000                                             
5a898978-0976-4613-ba14-81cfcc11ef8c
e6e382d6-c420-4739-a356-652d911761ec
root@n4:~# ovs-appctl -t ovs-vswitchd qos/show veth0
QoS: veth0 linux-htb
max-rate: 10000000000

Default:
        burst: 12512
        min-rate: 2000000
        tx_packets: 3117
        tx_bytes: 4662834
        tx_errors: 0
root@n4:~# ovs-appctl -t ovs-vswitchd qos/show veth2
QoS not configured on veth2
ovs-appctl: ovs-vswitchd: server returned an error
root@n4:~# ifconfig
eth0      Link encap:Ethernet  HWaddr 90:b1:1c:5a:4b:e0
          inet addr:10.0.31.19  Bcast:10.0.31.255  Mask:255.255.255.0
          inet6 addr: fe80::92b1:1cff:fe5a:4be0/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:169628 errors:0 dropped:0 overruns:0 frame:0
          TX packets:209530 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:77951959 (77.9 MB)  TX bytes:218949825 (218.9 MB)
          Interrupt:35

eth2      Link encap:Ethernet  HWaddr 90:b1:1c:5a:4b:e2
          inet addr:10.1.24.4  Bcast:10.1.24.255  Mask:255.255.255.0
          inet6 addr: fe80::92b1:1cff:fe5a:4be2/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:2326 errors:0 dropped:0 overruns:0 frame:0
          TX packets:5908 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:173952 (173.9 KB)  TX bytes:438444 (438.4 KB)
          Interrupt:34

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:244 errors:0 dropped:0 overruns:0 frame:0
          TX packets:244 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:36407 (36.4 KB)  TX bytes:36407 (36.4 KB)

veth0     Link encap:Ethernet  HWaddr 52:5e:be:01:2b:52
          inet addr:10.1.1.2  Bcast:10.1.1.255  Mask:255.255.255.0
          inet6 addr: fe80::505e:beff:fe01:2b52/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:614245 errors:0 dropped:0 overruns:0 frame:0
          TX packets:700147 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:40544276 (40.5 MB)  TX bytes:26943219990 (26.9 GB)

veth2     Link encap:Ethernet  HWaddr fe:0b:d9:6c:31:c0
          inet addr:10.1.1.4  Bcast:10.1.1.255  Mask:255.255.255.0
          inet6 addr: fe80::fc0b:d9ff:fe6c:31c0/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:700015 errors:0 dropped:0 overruns:0 frame:0
          TX packets:614331 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:26943214258 (26.9 GB)  TX bytes:40550728 (40.5 MB)

root@n4:~# ovs-vsctl show
ec3a1666-224f-4b92-8a3c-615ac4bf511e
    Bridge "s1"
        Port "veth0"
            Interface "veth0"
        Port "s1"
            Interface "s1"
                type: internal
        Port "veth2"
            Interface "veth2"
root@n4:~# ovs-ofctl show s1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000000000aabbcc
n_tables:254, n_buffers:256
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 1(veth0): addr:52:5e:be:01:2b:52
     config:     0
     state:      0
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth2): addr:fe:0b:d9:6c:31:c0
     config:     0
     state:      0
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(s1): addr:00:00:00:aa:bb:cc
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0
root@n4:~# ovs-vsctl list qos
_uuid               : 5a898978-0976-4613-ba14-81cfcc11ef8c
external_ids        : {}
other_config        : {}
queues              : {0=e6e382d6-c420-4739-a356-652d911761ec}
type                : linux-htb
root@n4:~# ovs-vsctl list queue
_uuid               : e6e382d6-c420-4739-a356-652d911761ec
dscp                : []
external_ids        : {}
other_config        : {max-rate="2000000", min-rate="2000000"}
root@n4:~# ovs-vsctl list port veth0
_uuid               : 45f7d86a-4fb2-43f4-b503-14e0b0321e0a
bond_active_slave   : []
bond_downdelay      : 0
bond_fake_iface     : false
bond_mode           : []
bond_updelay        : 0
external_ids        : {}
fake_bridge         : false
interfaces          : [724d5030-6b23-4057-9c2a-41af77afe315]
lacp                : []
mac                 : []
name                : "veth0"
other_config        : {}
qos                 : 5a898978-0976-4613-ba14-81cfcc11ef8c
rstp_statistics     : {}
rstp_status         : {}
statistics          : {}
status              : {}
tag                 : []
trunks              : []
vlan_mode           : []
root@n4:~# ovs-vsctl list port veth2
_uuid               : bbccc654-f5ce-4c58-93d5-39dee66eceb7
bond_active_slave   : []
bond_downdelay      : 0
bond_fake_iface     : false
bond_mode           : []
bond_updelay        : 0
external_ids        : {}
fake_bridge         : false
interfaces          : [23952d46-2ae1-4c80-bd06-a818d27ef8c9]
lacp                : []
mac                 : []
name                : "veth2"
other_config        : {}
qos                 : []
rstp_statistics     : {}
rstp_status         : {}
statistics          : {}
status              : {}
tag                 : []
trunks              : []
vlan_mode           : []
root@n4:~# ifconfig
eth0      Link encap:Ethernet  HWaddr 90:b1:1c:5a:4b:e0
          inet addr:10.0.31.19  Bcast:10.0.31.255  Mask:255.255.255.0
          inet6 addr: fe80::92b1:1cff:fe5a:4be0/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:173561 errors:0 dropped:0 overruns:0 frame:0
          TX packets:213019 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:78687485 (78.6 MB)  TX bytes:221502388 (221.5 MB)
          Interrupt:35

eth2      Link encap:Ethernet  HWaddr 90:b1:1c:5a:4b:e2
          inet addr:10.1.24.4  Bcast:10.1.24.255  Mask:255.255.255.0
          inet6 addr: fe80::92b1:1cff:fe5a:4be2/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:2326 errors:0 dropped:0 overruns:0 frame:0
          TX packets:5908 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:173952 (173.9 KB)  TX bytes:438444 (438.4 KB)
          Interrupt:34

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:274 errors:0 dropped:0 overruns:0 frame:0
          TX packets:274 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:39047 (39.0 KB)  TX bytes:39047 (39.0 KB)

veth0     Link encap:Ethernet  HWaddr 52:5e:be:01:2b:52
          inet addr:10.1.1.2  Bcast:10.1.1.255  Mask:255.255.255.0
          inet6 addr: fe80::505e:beff:fe01:2b52/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:740578 errors:0 dropped:0 overruns:0 frame:0
          TX packets:742215 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:2516966708 (2.5 GB)  TX bytes:26953822792 (26.9 GB)

veth2     Link encap:Ethernet  HWaddr fe:0b:d9:6c:31:c0
          inet addr:10.1.1.4  Bcast:10.1.1.255  Mask:255.255.255.0
          inet6 addr: fe80::fc0b:d9ff:fe6c:31c0/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:808211 errors:0 dropped:0 overruns:0 frame:0
          TX packets:740740 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:27053884916 (27.0 GB)  TX bytes:2516978784 (2.5 GB)

root@n4:~# ip link add veth4 type veth peer name veth5
root@n4:~# ip link set veth5 netns ns1
root@n4:~# ip netns add ns3
root@n4:~# ip link set veth5 netns ns3
Cannot find device "veth5"
root@n4:~# ip link --help
Command "--help" is unknown, try "ip link help".
root@n4:~# ip link del veth5 netns ns1
Cannot find device "veth5"
root@n4:~# ip link unset veth5 netns ns1                                                                         
Command "unset" is unknown, try "ip link help".
root@n4:~# ip link remove veth5 netns ns1                                                                        
Command "remove" is unknown, try "ip link help".
root@n4:~# ip link del veth5 netns ns1
Cannot find device "veth5"
root@n4:~# ip netns exec ns1 ip link del veth5 netns ns1
root@n4:~# ifconfig veth5
veth5: error fetching interface information: Device not found
root@n4:~# ip netns
ns3
ns2
ns1
root@n4:~# ifconfig veth4
veth4: error fetching interface information: Device not found
root@n4:~# ifconfig
eth0      Link encap:Ethernet  HWaddr 90:b1:1c:5a:4b:e0
          inet addr:10.0.31.19  Bcast:10.0.31.255  Mask:255.255.255.0
          inet6 addr: fe80::92b1:1cff:fe5a:4be0/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:175268 errors:0 dropped:0 overruns:0 frame:0
          TX packets:214283 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:78841138 (78.8 MB)  TX bytes:222218194 (222.2 MB)
          Interrupt:35

eth2      Link encap:Ethernet  HWaddr 90:b1:1c:5a:4b:e2
          inet addr:10.1.24.4  Bcast:10.1.24.255  Mask:255.255.255.0
          inet6 addr: fe80::92b1:1cff:fe5a:4be2/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:2326 errors:0 dropped:0 overruns:0 frame:0
          TX packets:5908 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:173952 (173.9 KB)  TX bytes:438444 (438.4 KB)
          Interrupt:34

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:283 errors:0 dropped:0 overruns:0 frame:0
          TX packets:283 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:39839 (39.8 KB)  TX bytes:39839 (39.8 KB)

veth0     Link encap:Ethernet  HWaddr 52:5e:be:01:2b:52
          inet addr:10.1.1.2  Bcast:10.1.1.255  Mask:255.255.255.0
          inet6 addr: fe80::505e:beff:fe01:2b52/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:740578 errors:0 dropped:0 overruns:0 frame:0
          TX packets:742287 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:2516966708 (2.5 GB)  TX bytes:26953825816 (26.9 GB)

veth2     Link encap:Ethernet  HWaddr fe:0b:d9:6c:31:c0
          inet addr:10.1.1.4  Bcast:10.1.1.255  Mask:255.255.255.0
          inet6 addr: fe80::fc0b:d9ff:fe6c:31c0/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:808265 errors:0 dropped:0 overruns:0 frame:0
          TX packets:740761 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:27053887184 (27.0 GB)  TX bytes:2516980338 (2.5 GB)

root@n4:~# ip link add veth4 type veth peer name veth5
root@n4:~# ip link set veth5 netns ns3
root@n4:~# ip netns exec ns3 ifconfig veth5 10.1.1.5/25 up
root@n4:~# ifconfig veth4 10.1.1.6/24 up
root@n4:~#
root@n4:~#
root@n4:~#
root@n4:~# ping 10.1.1.5
PING 10.1.1.5 (10.1.1.5) 56(84) bytes of data.
^C
--- 10.1.1.5 ping statistics ---
3 packets transmitted, 0 received, 100% packet loss, time 1999ms

root@n4:~# route -n
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
0.0.0.0         10.0.31.201     0.0.0.0         UG    0      0        0 eth0
10.0.0.0        10.1.24.2       255.0.0.0       UG    0      0        0 eth2
10.0.31.0       0.0.0.0         255.255.255.0   U     0      0        0 eth0
10.1.1.0        0.0.0.0         255.255.255.0   U     0      0        0 veth0
10.1.1.0        0.0.0.0         255.255.255.0   U     0      0        0 veth4
10.1.1.3        0.0.0.0         255.255.255.255 UH    0      0        0 veth2
10.1.24.0       0.0.0.0         255.255.255.0   U     0      0        0 eth2
root@n4:~# ip route add 10.1.1.5 dev veth4
root@n4:~# route -n
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
0.0.0.0         10.0.31.201     0.0.0.0         UG    0      0        0 eth0
10.0.0.0        10.1.24.2       255.0.0.0       UG    0      0        0 eth2
10.0.31.0       0.0.0.0         255.255.255.0   U     0      0        0 eth0
10.1.1.0        0.0.0.0         255.255.255.0   U     0      0        0 veth0
10.1.1.0        0.0.0.0         255.255.255.0   U     0      0        0 veth4
10.1.1.3        0.0.0.0         255.255.255.255 UH    0      0        0 veth2
10.1.1.5        0.0.0.0         255.255.255.255 UH    0      0        0 veth4
10.1.24.0       0.0.0.0         255.255.255.0   U     0      0        0 eth2
root@n4:~# ip route del 10.1.1.0/24 dev veth4
root@n4:~#
root@n4:~# route -n
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
0.0.0.0         10.0.31.201     0.0.0.0         UG    0      0        0 eth0
10.0.0.0        10.1.24.2       255.0.0.0       UG    0      0        0 eth2
10.0.31.0       0.0.0.0         255.255.255.0   U     0      0        0 eth0
10.1.1.0        0.0.0.0         255.255.255.0   U     0      0        0 veth0
10.1.1.3        0.0.0.0         255.255.255.255 UH    0      0        0 veth2
10.1.1.5        0.0.0.0         255.255.255.255 UH    0      0        0 veth4
10.1.24.0       0.0.0.0         255.255.255.0   U     0      0        0 eth2
root@n4:~# ping 10.1.l.5
ping: unknown host 10.1.l.5
root@n4:~# ping 10.1.1.5
PING 10.1.1.5 (10.1.1.5) 56(84) bytes of data.
64 bytes from 10.1.1.5: icmp_seq=1 ttl=64 time=0.059 ms
64 bytes from 10.1.1.5: icmp_seq=2 ttl=64 time=0.029 ms
^C
--- 10.1.1.5 ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 999ms
rtt min/avg/max/mdev = 0.029/0.044/0.059/0.015 ms
root@n4:~# ovs-vsctl show
ec3a1666-224f-4b92-8a3c-615ac4bf511e
    Bridge "s1"
        Port "veth0"
            Interface "veth0"
        Port "s1"
            Interface "s1"
                type: internal
        Port "veth2"
            Interface "veth2"
root@n4:~# ovs-vsctl add-port s1 veth4
root@n4:~#
root@n4:~#
root@n4:~# ovs-vsctl show
ec3a1666-224f-4b92-8a3c-615ac4bf511e
    Bridge "s1"
        Port "veth0"
            Interface "veth0"
        Port "veth4"
            Interface "veth4"
        Port "s1"
            Interface "s1"
                type: internal
        Port "veth2"
            Interface "veth2"
root@n4:~# ovs-vsctl set port veth0 qos=@newqos -- --id=@newqos create qos type=linux-htb queues=1=@q1 -- --id=@q1 crea
te queue other-config:min-rate=1000000000 other-config:max-rate=1000000000
5a7a22f8-096b-4192-9586-3cf1f8b9332d
8a7621d5-6700-4b6c-b4ef-c07c12cbc0d5
root@n4:~# ovs-appctl -t ovs-vswitchd qos/show veth0
QoS: veth0 linux-htb
max-rate: 10000000000

Default:
        burst: 12512
        min-rate: 12000
        max-rate: 10000000000
        tx_packets: 9
        tx_bytes: 378
        tx_errors: 0

Queue 1:
        burst: 12512
        burst: 12512
        min-rate: 1000000000
        min-rate: 12000
        max-rate: 10000000000
        tx_packets: 0
        tx_bytes: 0
        tx_errors: 0
root@n4:~# ovs-vsctl set port veth0 qos=@newqos -- --id=@newqos create qos type=linux-htb queues=0=@q0,1=@q1 -- --id=@q
0 create queue other-config:min-rate=1000000000 other-config:max-rate=1000000000 -- --id=@q1 create queue other-config:min-rate=2000000 other-config:max-rate=2000000
a29e1d2f-4885-4027-856c-cbd0083fff97
2f0c1684-d3cc-4fb1-bb3a-9a452aab0c12
88d3d960-f9c8-4c03-8faf-c69552f8f8bf
root@n4:~#
root@n4:~#
root@n4:~#
root@n4:~# ovs-appctl -t ovs-vswitchd qos/show veth0                                                             
QoS: veth0 linux-htb
max-rate: 10000000000

Default:
        burst: 12512
        min-rate: 1000000000
        tx_packets: 33
        tx_bytes: 1386
        tx_errors: 0

Queue 1:
        burst: 12512
        burst: 12512
        min-rate: 2000000
        min-rate: 1000000000
        tx_packets: 0
        tx_bytes: 0
        tx_errors: 0
root@n4:~#
root@n4:~#
root@n4:~# ovs-vsctl list port veth0
_uuid               : 45f7d86a-4fb2-43f4-b503-14e0b0321e0a
bond_active_slave   : []
bond_downdelay      : 0
bond_fake_iface     : false
bond_mode           : []
bond_updelay        : 0
external_ids        : {}
fake_bridge         : false
interfaces          : [724d5030-6b23-4057-9c2a-41af77afe315]
lacp                : []
mac                 : []
name                : "veth0"
other_config        : {}
qos                 : a29e1d2f-4885-4027-856c-cbd0083fff97
rstp_statistics     : {}
rstp_status         : {}
statistics          : {}
status              : {}
tag                 : []
trunks              : []
vlan_mode           : []
root@n4:~# ovs-vsctl list qos
_uuid               : 5a898978-0976-4613-ba14-81cfcc11ef8c
external_ids        : {}
other_config        : {}
queues              : {0=e6e382d6-c420-4739-a356-652d911761ec}
type                : linux-htb

_uuid               : 5a7a22f8-096b-4192-9586-3cf1f8b9332d
external_ids        : {}
other_config        : {}
queues              : {1=8a7621d5-6700-4b6c-b4ef-c07c12cbc0d5}
type                : linux-htb

_uuid               : a29e1d2f-4885-4027-856c-cbd0083fff97
external_ids        : {}
other_config        : {}
queues              : {0=2f0c1684-d3cc-4fb1-bb3a-9a452aab0c12, 1=88d3d960-f9c8-4c03-8faf-c69552f8f8bf}
type                : linux-htb
root@n4:~#
root@n4:~#
root@n4:~#
root@n4:~#
root@n4:~# ovs-vsctl list queue
_uuid               : 2f0c1684-d3cc-4fb1-bb3a-9a452aab0c12
dscp                : []
external_ids        : {}
other_config        : {max-rate="1000000000", min-rate="1000000000"}

_uuid               : 88d3d960-f9c8-4c03-8faf-c69552f8f8bf
dscp                : []
external_ids        : {}
other_config        : {max-rate="2000000", min-rate="2000000"}

_uuid               : 8a7621d5-6700-4b6c-b4ef-c07c12cbc0d5
dscp                : []
external_ids        : {}
other_config        : {max-rate="1000000000", min-rate="1000000000"}

_uuid               : e6e382d6-c420-4739-a356-652d911761ec
dscp                : []
external_ids        : {}
other_config        : {max-rate="2000000", min-rate="2000000"}
root@n4:~# ovs-appctl -t ovs-vswitchd qos/show veth0
QoS: veth0 linux-htb
max-rate: 10000000000

Default:
        burst: 12512
        min-rate: 1000000000
        tx_packets: 3870
        tx_bytes: 162540
        tx_errors: 0

Queue 1:
        burst: 12512
        burst: 12512
        min-rate: 2000000
        min-rate: 1000000000
        tx_packets: 0
        tx_bytes: 0
        tx_errors: 0
root@n4:~# ovs-vsctl --all destory qos
ovs-vsctl: unknown command 'destory'; use --help for help
root@n4:~# ovs-vsctl --all destroy qos
ovs-vsctl: transaction error: {"details":"cannot delete QoS row a29e1d2f-4885-4027-856c-cbd0083fff97 because of 1 remaining reference(s)","error":"referential integrity violation"}
root@n4:~# ovs-vsctl --all destroy queue
ovs-vsctl: transaction error: {"details":"cannot delete Queue row 2f0c1684-d3cc-4fb1-bb3a-9a452aab0c12 because of 1 remaining reference(s)","error":"referential integrity violation"}
root@n4:~# ovs-vsctl list qos
_uuid               : 5a898978-0976-4613-ba14-81cfcc11ef8c
external_ids        : {}
other_config        : {}
queues              : {0=e6e382d6-c420-4739-a356-652d911761ec}
type                : linux-htb

_uuid               : 5a7a22f8-096b-4192-9586-3cf1f8b9332d
external_ids        : {}
other_config        : {}
queues              : {1=8a7621d5-6700-4b6c-b4ef-c07c12cbc0d5}
type                : linux-htb

_uuid               : a29e1d2f-4885-4027-856c-cbd0083fff97
external_ids        : {}
other_config        : {}
queues              : {0=2f0c1684-d3cc-4fb1-bb3a-9a452aab0c12, 1=88d3d960-f9c8-4c03-8faf-c69552f8f8bf}
type                : linux-htb
root@n4:~# ovs-vsctl destroy qos 5a898978-0976-4613-ba14-81cfcc11ef8c
root@n4:~#
root@n4:~#
root@n4:~# ovs-vsctl list qos
_uuid               : 5a7a22f8-096b-4192-9586-3cf1f8b9332d
external_ids        : {}
other_config        : {}
queues              : {1=8a7621d5-6700-4b6c-b4ef-c07c12cbc0d5}
type                : linux-htb

_uuid               : a29e1d2f-4885-4027-856c-cbd0083fff97
external_ids        : {}
other_config        : {}
queues              : {0=2f0c1684-d3cc-4fb1-bb3a-9a452aab0c12, 1=88d3d960-f9c8-4c03-8faf-c69552f8f8bf}
type                : linux-htb
root@n4:~# ovs-vsctl destroy qos 5a7a22f8-096b-4192-9586-3cf1f8b9332d
root@n4:~#
root@n4:~# ovs-vsctl list qos
_uuid               : a29e1d2f-4885-4027-856c-cbd0083fff97
external_ids        : {}
other_config        : {}
queues              : {0=2f0c1684-d3cc-4fb1-bb3a-9a452aab0c12, 1=88d3d960-f9c8-4c03-8faf-c69552f8f8bf}
type                : linux-htb
root@n4:~# ovs-vsctl destroy qos a29e1d2f-4885-4027-856c-cbd0083fff97
ovs-vsctl: transaction error: {"details":"cannot delete QoS row a29e1d2f-4885-4027-856c-cbd0083fff97 because of 1 remaining reference(s)","error":"referential integrity violation"}
root@n4:~# ovs-vctl list queue
No command 'ovs-vctl' found, did you mean:
 Command 'ovs-vsctl' from package 'openvswitch-switch' (main)
ovs-vctl: command not found
root@n4:~# ovs-vsctl list queue
_uuid               : 2f0c1684-d3cc-4fb1-bb3a-9a452aab0c12
dscp                : []
external_ids        : {}
other_config        : {max-rate="1000000000", min-rate="1000000000"}

_uuid               : 88d3d960-f9c8-4c03-8faf-c69552f8f8bf
dscp                : []
external_ids        : {}
other_config        : {max-rate="2000000", min-rate="2000000"}

_uuid               : 8a7621d5-6700-4b6c-b4ef-c07c12cbc0d5
dscp                : []
external_ids        : {}
other_config        : {max-rate="1000000000", min-rate="1000000000"}

_uuid               : e6e382d6-c420-4739-a356-652d911761ec
dscp                : []
external_ids        : {}
other_config        : {max-rate="2000000", min-rate="2000000"}
root@n4:~# ovs-vsctl destroy queue 2f0c1684-d3cc-4fb1-bb3a-9a452aab0c12
ovs-vsctl: transaction error: {"details":"cannot delete Queue row 2f0c1684-d3cc-4fb1-bb3a-9a452aab0c12 because of 1 remaining reference(s)","error":"referential integrity violation"}
root@n4:~#
root@n4:~#
root@n4:~# ovs-vsctl clear qos veth0 queues
root@n4:~# ovs-vsctl list queue
_uuid               : 88d3d960-f9c8-4c03-8faf-c69552f8f8bf
dscp                : []
external_ids        : {}
other_config        : {max-rate="2000000", min-rate="2000000"}

_uuid               : 2f0c1684-d3cc-4fb1-bb3a-9a452aab0c12
dscp                : []
external_ids        : {}
other_config        : {max-rate="1000000000", min-rate="1000000000"}

_uuid               : 8a7621d5-6700-4b6c-b4ef-c07c12cbc0d5
dscp                : []
external_ids        : {}
other_config        : {max-rate="1000000000", min-rate="1000000000"}

_uuid               : e6e382d6-c420-4739-a356-652d911761ec
dscp                : []
external_ids        : {}
other_config        : {max-rate="2000000", min-rate="2000000"}
root@n4:~# ovs-vsctl list qos
_uuid               : a29e1d2f-4885-4027-856c-cbd0083fff97
external_ids        : {}
other_config        : {}
queues              : {}
type                : linux-htb
root@n4:~#
root@n4:~#
root@n4:~# ovs-vsctl destroy qos a29e1d2f-4885-4027-856c-cbd0083fff97
ovs-vsctl: transaction error: {"details":"cannot delete QoS row a29e1d2f-4885-4027-856c-cbd0083fff97 because of 1 remaining reference(s)","error":"referential integrity violation"}
root@n4:~#
root@n4:~#
root@n4:~# ovs-vsctl list port veth0
_uuid               : 45f7d86a-4fb2-43f4-b503-14e0b0321e0a
bond_active_slave   : []
bond_downdelay      : 0
bond_fake_iface     : false
bond_mode           : []
bond_updelay        : 0
external_ids        : {}
fake_bridge         : false
interfaces          : [724d5030-6b23-4057-9c2a-41af77afe315]
lacp                : []
mac                 : []
name                : "veth0"
other_config        : {}
qos                 : a29e1d2f-4885-4027-856c-cbd0083fff97
rstp_statistics     : {}
rstp_status         : {}
statistics          : {}
status              : {}
tag                 : []
trunks              : []
vlan_mode           : []
root@n4:~# ovs-vsctl list qos a29e1d2f-4885-4027-856c-cbd0083fff97
_uuid               : a29e1d2f-4885-4027-856c-cbd0083fff97
external_ids        : {}
other_config        : {}
queues              : {}
type                : linux-htb
root@n4:~# ovs-vsctl list queue
_uuid               : 88d3d960-f9c8-4c03-8faf-c69552f8f8bf
dscp                : []
external_ids        : {}
other_config        : {max-rate="2000000", min-rate="2000000"}

_uuid               : 2f0c1684-d3cc-4fb1-bb3a-9a452aab0c12
dscp                : []
external_ids        : {}
other_config        : {max-rate="1000000000", min-rate="1000000000"}

_uuid               : 8a7621d5-6700-4b6c-b4ef-c07c12cbc0d5
dscp                : []
external_ids        : {}
other_config        : {max-rate="1000000000", min-rate="1000000000"}

_uuid               : e6e382d6-c420-4739-a356-652d911761ec
dscp                : []
external_ids        : {}
other_config        : {max-rate="2000000", min-rate="2000000"}
root@n4:~# ovs-vsctl destroy queue 2f0c1684-d3cc-4fb1-bb3a-9a452aab0c12
root@n4:~# ovs-vsctl destroy queue 8a7621d5-6700-4b6c-b4ef-c07c12cbc0d5
root@n4:~# ovs-vsctl destroy queue e6e382d6-c420-4739-a356-652d911761ec
root@n4:~#
root@n4:~#
root@n4:~# ovs-vsctl list queue
_uuid               : 88d3d960-f9c8-4c03-8faf-c69552f8f8bf
dscp                : []
external_ids        : {}
other_config        : {max-rate="2000000", min-rate="2000000"}
root@n4:~# ovs-vsctl destroy queue 88d3d960-f9c8-4c03-8faf-c69552f8f8bf
root@n4:~# ovs-vsctl list queue
root@n4:~# ovs-vsctl --all destroy qos
ovs-vsctl: transaction error: {"details":"cannot delete QoS row a29e1d2f-4885-4027-856c-cbd0083fff97 because of 1 remaining reference(s)","error":"referential integrity violation"}
root@n4:~# ovs-vsctl list qos
_uuid               : a29e1d2f-4885-4027-856c-cbd0083fff97
external_ids        : {}
other_config        : {}
queues              : {}
type                : linux-htb
root@n4:~# ovs-vsctl list queue
root@n4:~# ovs-vsctl destroy qos a29e1d2f-4885-4027-856c-cbd0083fff97
ovs-vsctl: transaction error: {"details":"cannot delete QoS row a29e1d2f-4885-4027-856c-cbd0083fff97 because of 1 remaining reference(s)","error":"referential integrity violation"}
root@n4:~# ifconfig
eth0      Link encap:Ethernet  HWaddr 90:b1:1c:5a:4b:e0
          inet addr:10.0.31.19  Bcast:10.0.31.255  Mask:255.255.255.0
          inet6 addr: fe80::92b1:1cff:fe5a:4be0/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:206166 errors:0 dropped:0 overruns:0 frame:0
          TX packets:222782 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:81342087 (81.3 MB)  TX bytes:225744428 (225.7 MB)
          Interrupt:35

eth2      Link encap:Ethernet  HWaddr 90:b1:1c:5a:4b:e2
          inet addr:10.1.24.4  Bcast:10.1.24.255  Mask:255.255.255.0
          inet6 addr: fe80::92b1:1cff:fe5a:4be2/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:2763 errors:0 dropped:0 overruns:0 frame:0
          TX packets:6198 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:218408 (218.4 KB)  TX bytes:499986 (499.9 KB)
          Interrupt:34

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:2709 errors:0 dropped:0 overruns:0 frame:0
          TX packets:2709 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:191931 (191.9 KB)  TX bytes:191931 (191.9 KB)

veth0     Link encap:Ethernet  HWaddr 52:5e:be:01:2b:52
          inet addr:10.1.1.2  Bcast:10.1.1.255  Mask:255.255.255.0
          inet6 addr: fe80::505e:beff:fe01:2b52/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:740584 errors:0 dropped:0 overruns:0 frame:0
          TX packets:746626 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:2516967184 (2.5 GB)  TX bytes:26954008278 (26.9 GB)

veth2     Link encap:Ethernet  HWaddr fe:0b:d9:6c:31:c0
          inet addr:10.1.1.4  Bcast:10.1.1.255  Mask:255.255.255.0
          inet6 addr: fe80::fc0b:d9ff:fe6c:31c0/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:812591 errors:0 dropped:0 overruns:0 frame:0
          TX packets:742446 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:27054068988 (27.0 GB)  TX bytes:2517105012 (2.5 GB)

veth4     Link encap:Ethernet  HWaddr 5a:70:9f:0a:6b:98
          inet addr:10.1.1.6  Bcast:10.1.1.255  Mask:255.255.255.0
          inet6 addr: fe80::5870:9fff:fe0a:6b98/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:26 errors:0 dropped:0 overruns:0 frame:0
          TX packets:4289 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:1964 (1.9 KB)  TX bytes:181010 (181.0 KB)

root@n4:~# ifconfig veth0 down
root@n4:~# ovs-vsctl list qos
_uuid               : a29e1d2f-4885-4027-856c-cbd0083fff97
external_ids        : {}
other_config        : {}
queues              : {}
type                : linux-htb
root@n4:~# ovs-vsctl destroy qos a29e1d2f-4885-4027-856c-cbd0083fff97
ovs-vsctl: transaction error: {"details":"cannot delete QoS row a29e1d2f-4885-4027-856c-cbd0083fff97 because of 1 remaining reference(s)","error":"referential integrity violation"}
root@n4:~# ifconfig veth0 up
root@n4:~# ovs-vsctl del-port s1 veth0
root@n4:~# ovs-vsctl list qos
_uuid               : a29e1d2f-4885-4027-856c-cbd0083fff97
external_ids        : {}
other_config        : {}
queues              : {}
type                : linux-htb
root@n4:~# ovs-vsctl destroy qos a29e1d2f-4885-4027-856c-cbd0083fff97
root@n4:~# ovs-vsctl add-port s1 veth0
root@n4:~#
root@n4:~#
root@n4:~# ovs-vsctl list qos
root@n4:~# ovs-vsctl set port veth0 qos=@newqos -- --id=@newqos create qos type=linux-htb queues=0=@q0,1=@q1 -- --id=@q0 create queue other-config:min-rate=1000000000 other-config:max-rate=1000000000 -- --id=@q1 create queue other-config:min-rate=2000000 other-config:max-rate=2000000
d49c34d6-bec7-44fb-b41b-fef2822e06c2
2838672b-9873-4919-8f0c-b9c6d2fdfad6
94a60622-269f-49b5-a51f-09f54b458714
root@n4:~#
root@n4:~#
root@n4:~# ovs-vsctl list qos
_uuid               : d49c34d6-bec7-44fb-b41b-fef2822e06c2
external_ids        : {}
other_config        : {}
queues              : {0=2838672b-9873-4919-8f0c-b9c6d2fdfad6, 1=94a60622-269f-49b5-a51f-09f54b458714}
type                : linux-htb
root@n4:~# ovs-vsctl list queue
_uuid               : 94a60622-269f-49b5-a51f-09f54b458714
dscp                : []
external_ids        : {}
other_config        : {max-rate="2000000", min-rate="2000000"}

_uuid               : 2838672b-9873-4919-8f0c-b9c6d2fdfad6
dscp                : []
external_ids        : {}
other_config        : {max-rate="1000000000", min-rate="1000000000"}
root@n4:~#
root@n4:~#
root@n4:~# ovs-vsctl list port veth0
_uuid               : 2aee8209-b084-4ed1-9227-793f6b4436ee
bond_active_slave   : []
bond_downdelay      : 0
bond_fake_iface     : false
bond_mode           : []
bond_updelay        : 0
external_ids        : {}
fake_bridge         : false
interfaces          : [af5c5674-ca4d-4af1-9653-c58cf7f2207d]
lacp                : []
mac                 : []
name                : "veth0"
other_config        : {}
qos                 : d49c34d6-bec7-44fb-b41b-fef2822e06c2
rstp_statistics     : {}
rstp_status         : {}
statistics          : {}
status              : {}
tag                 : []
trunks              : []
vlan_mode           : []
root@n4:~#
root@n4:~#
root@n4:~# ovs-appctl -t ovs-vswitchd qos/show veth0
QoS: veth0 linux-htb
max-rate: 10000000000

Default:
        burst: 12512
        min-rate: 1000000000
        tx_packets: 27
        tx_bytes: 1134
        tx_errors: 0

Queue 1:
        burst: 12512
        burst: 12512
        min-rate: 2000000
        min-rate: 1000000000
        tx_packets: 0
        tx_bytes: 0
        tx_errors: 0
root@n4:~# ovs-vsctl show
ec3a1666-224f-4b92-8a3c-615ac4bf511e
    Bridge "s1"
        Port "veth0"
            Interface "veth0"
        Port "veth4"
            Interface "veth4"
        Port "s1"
            Interface "s1"
                type: internal
        Port "veth2"
            Interface "veth2"
root@n4:~# ovs-vsctl list qos
_uuid               : d49c34d6-bec7-44fb-b41b-fef2822e06c2
external_ids        : {}
other_config        : {}
queues              : {0=2838672b-9873-4919-8f0c-b9c6d2fdfad6, 1=94a60622-269f-49b5-a51f-09f54b458714}
type                : linux-htb
root@n4:~# ovs-vsctl list queue
_uuid               : 94a60622-269f-49b5-a51f-09f54b458714
dscp                : []
external_ids        : {}
other_config        : {max-rate="2000000", min-rate="2000000"}

_uuid               : 2838672b-9873-4919-8f0c-b9c6d2fdfad6
dscp                : []
external_ids        : {}
other_config        : {max-rate="1000000000", min-rate="1000000000"}
root@n4:~#
root@n4:~#
root@n4:~# ovs-ofctl show
ovs-ofctl: 'show' command requires at least 1 arguments
root@n4:~# ovs-ofctl show s1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000000000aabbcc
n_tables:254, n_buffers:256
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 2(veth2): addr:fe:0b:d9:6c:31:c0
     config:     0
     state:      0
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 3(veth4): addr:5a:70:9f:0a:6b:98
     config:     0
     state:      0
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 4(veth0): addr:52:5e:be:01:2b:52
     config:     0
     state:      0
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(s1): addr:00:00:00:aa:bb:cc
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0
root@n4:~# ovs-ofctl dump-port s1
ovs-ofctl: unknown command 'dump-port'; use --help for help
root@n4:~# ovs-ofctl dump-ports s1
OFPST_PORT reply (xid=0x2): 4 ports
  port  4: rx pkts=2563121, bytes=29648834538, drop=0, errs=0, frame=0, over=0, crc=0
           tx pkts=2571201, bytes=80435410172, drop=0, errs=0, coll=0
  port LOCAL: rx pkts=0, bytes=0, drop=0, errs=0, frame=0, over=0, crc=0
           tx pkts=0, bytes=0, drop=0, errs=0, coll=0
  port  2: rx pkts=1383617, bytes=52361384840, drop=0, errs=0, frame=0, over=0, crc=0
           tx pkts=1313269, bytes=2610194306, drop=0, errs=0, coll=0
  port  3: rx pkts=1253594, bytes=28174088492, drop=0, errs=0, frame=0, over=0, crc=0
           tx pkts=1257168, bytes=27094445936, drop=0, errs=0, coll=0
root@n4:~#
root@n4:~#
root@n4:~# ovs-ofctl add-flow s1 ip,nw_src=10.1.1.5 actions=enqueue:4:1
ovs-ofctl: 'add-flow' command takes at most 2 arguments
root@n4:~# ovs-ofctl add-flow s1 ip,nw_src=10.1.1.5,actions=enqueue:4:1
root@n4:~#
root@n4:~# ovs-ofctl show s1
OFPT_FEATURES_REPLY (xid=0x2): dpid:0000000000aabbcc
n_tables:254, n_buffers:256
capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP
actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst
 2(veth2): addr:fe:0b:d9:6c:31:c0
     config:     0
     state:      0
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 3(veth4): addr:5a:70:9f:0a:6b:98
     config:     0
     state:      0
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 4(veth0): addr:52:5e:be:01:2b:52
     config:     0
     state:      0
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(s1): addr:00:00:00:aa:bb:cc
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max
OFPT_GET_CONFIG_REPLY (xid=0x4): frags=normal miss_send_len=0
root@n4:~# ovs-ofctl dump-flow s1
ovs-ofctl: unknown command 'dump-flow'; use --help for help
root@n4:~# ovs-ofctl dump-flows s1
NXST_FLOW reply (xid=0x4):
 cookie=0x0, duration=27.596s, table=0, n_packets=0, n_bytes=0, idle_age=27, ip,nw_src=10.1.1.5 actions=enqueue:4:1
 cookie=0x0, duration=33987.016s, table=0, n_packets=5200328, n_bytes=110184305890, idle_age=46, priority=0 actions=NORMAL
root@n4:~#tc -s -d class show dev veth0
class htb 1:1 parent 1:fffe prio 0 quantum 200000 rate 1000Mbit ceil 1000Mbit linklayer ethernet burst 1500b/1 mpu 0b overhead 0b cburst 1500b/1 mpu 0b overhead 0b level 0
 Sent 6309347914 bytes 4816781 pkt (dropped 0, overlimits 0 requeues 0)
 rate 0bit 0pps backlog 0b 0p requeues 0
 lended: 777469 borrowed: 0 giants: 0
 tokens: 189 ctokens: 189

class htb 1:fffe root rate 10000Mbit ceil 10000Mbit linklayer ethernet burst 1250b/1 mpu 0b overhead 0b cburst 1250b/1 mpu 0b overhead 0b level 7
 Sent 6346637648 bytes 4841444 pkt (dropped 0, overlimits 0 requeues 0)
 rate 0bit 0pps backlog 0b 0p requeues 0
 lended: 0 borrowed: 0 giants: 0
 tokens: 17 ctokens: 17

class htb 1:2 parent 1:fffe prio 0 quantum 25000 rate 2000Kbit ceil 2000Kbit linklayer ethernet burst 1564b/1 mpu 0b overhead 0b cburst 1564b/1 mpu 0b overhead 0b level 0
 Sent 37289734 bytes 24663 pkt (dropped 0, overlimits 0 requeues 0)
 rate 0bit 0pps backlog 0b 0p requeues 0
 lended: 12136 borrowed: 0 giants: 0
 tokens: -4028 ctokens: -4028

